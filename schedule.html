<!-- schedule.html -->
<!DOCTYPE html><html lang="ar" dir="rtl"><head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<title>جدول المراجعة</title>
<style>
:root{--g1:#4e5eff;--g2:#8b37ff;--bg:#f7f9ff;--c:#fff;--t:#1e1e1e}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Tajawal',sans-serif}
body{background:var(--bg);min-height:100vh;color:var(--t);display:flex;flex-direction:column}
header{background:linear-gradient(90deg,var(--g1),var(--g2));color:#fff;padding:18px 30px;font-weight:700;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}
nav{display:flex;gap:20px;font-size:.9rem}
nav a{color:#fff;text-decoration:none;font-weight:600;display:flex;align-items:center;gap:6px;transition:.3s}
nav a:hover{opacity:.8}
#main{flex:1;max-width:980px;margin:auto;width:100%;padding:30px 15px}
.top{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;gap:10px}
.top div{display:flex;align-items:center;gap:10px}
button{background:linear-gradient(90deg,var(--g1),var(--g2));border:none;color:#fff;padding:10px 18px;border-radius:12px;font-weight:600;cursor:pointer}
#calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:8px}
.day{background:#fff;border-radius:14px;padding:10px;min-height:110px;box-shadow:0 6px 14px rgba(0,0,0,.05);display:flex;flex-direction:column}
.day.disabled{background:transparent;box-shadow:none}
.date{font-size:.85rem;margin-bottom:6px;color:#666;font-weight:700}
.tag{padding:2px 6px;border-radius:8px;font-size:.75rem;font-weight:700;display:inline-block;margin-bottom:4px}
.tag.high{background:#ffe5e5;color:#d00}
.tag.med{background:#fff7d6;color:#e0a800}
.tag.low{background:#e7f9e7;color:#2e8b57}
.item{font-size:.8rem;margin-bottom:3px}
#modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:flex;justify-content:center;align-items:center;visibility:hidden;opacity:0;transition:.3s}
#modal.show{visibility:visible;opacity:1}
#modal form{background:#fff;padding:30px 25px;border-radius:16px;width:100%;max-width:380px;display:flex;flex-direction:column;gap:16px}
input,select{padding:12px 14px;border:1px solid #ddd;border-radius:12px;font-size:1rem}
#close{position:absolute;top:12px;left:18px;background:none;border:none;font-size:1.3rem;color:#999;cursor:pointer}
@media(max-width:600px){
 header{padding:16px 20px}
 nav{flex-direction:column;gap:12px;font-size:.85rem;align-items:flex-start;margin-top:10px}
 #main{padding:25px 15px}
 .top{flex-direction:column}
 .day{min-height:90px}
}
</style></head><body>
<header>
 <span>جدول المراجعة</span>
 <nav>
   <a href="smart_assestant.html"><i class="fa-solid fa-robot"></i>المساعد الذكي</a>
   <a href="schedule.html"><i class="fa-solid fa-calendar-check"></i>جدول المراجعة</a>
   <a href="community.html"><i class="fa-solid fa-users"></i>المجتمع الدراسي</a>
     <a href="feedback.html"><i class="fa-solid fa-users"></i>تجربتك</a>
   <a href="login.html"><i class="fa-solid fa-right-from-bracket"></i>خروج</a>
 </nav>
</header>

<div id="main">
 <div class="top">
   <div><button id="prev">&#10094;</button><span id="monthYear" style="font-weight:700"></span><button id="next">&#10095;</button></div>
   <button id="add">إضافة جلسة</button>
 </div>
 <div id="calendar"></div>
</div>

<div id="modal">
 <form id="frm">
  <button id="close" type="button">&times;</button>
  <h3 style="text-align:center">جلسة جديدة</h3>
  <input name="title" placeholder="الموضوع" required>
  <input type="date" name="date" required>
  <input type="time" name="time" required>
  <select name="prio">
   <option value="عالية">أولوية عالية</option>
   <option value="متوسطة">أولوية متوسطة</option>
   <option value="منخفضة">أولوية منخفضة</option>
  </select>
  <button>حفظ</button>
 </form>
</div>

<script>
const cal=document.getElementById('calendar'),my=document.getElementById('monthYear')
let d=new Date(),data=JSON.parse(localStorage.getItem('sch')||'[]')
document.getElementById('add').onclick=()=>modal.classList.add('show')
document.getElementById('close').onclick=()=>modal.classList.remove('show')
modal.onclick=e=>{if(e.target===modal)modal.classList.remove('show')}
document.getElementById('prev').onclick=()=>{d.setMonth(d.getMonth()-1);render()}
document.getElementById('next').onclick=()=>{d.setMonth(d.getMonth()+1);render()}
frm.onsubmit=e=>{e.preventDefault();data.push(Object.fromEntries(new FormData(frm)));save();modal.classList.remove('show');frm.reset()}
function save(){localStorage.setItem('sch',JSON.stringify(data));render()}
function render(){
 cal.innerHTML='';const y=d.getFullYear(),m=d.getMonth()
 my.textContent=d.toLocaleDateString('ar-SA',{year:'numeric',month:'long'})
 const first=new Date(y,m,1).getDay(),days=new Date(y,m+1,0).getDate()
 for(let i=0;i<Math.ceil((first+days)/7)*7;i++){
   const dayNum=i-first+1,cell=document.createElement('div');cell.className='day'
   if(i<first||dayNum>days){cell.classList.add('disabled');cal.appendChild(cell);continue}
   const ds=`${y}-${String(m+1).padStart(2,'0')}-${String(dayNum).padStart(2,'0')}`
   cell.innerHTML=`<div class="date">${dayNum}</div>`
   data.filter(s=>s.date===ds).forEach(s=>{
     const cls=s.prio==='عالية'?'high':s.prio==='متوسطة'?'med':'low'
     cell.innerHTML+=`<span class="tag ${cls}">${s.prio}</span><div class="item">${s.title}<br><small>${s.time}</small></div>`
   });cal.appendChild(cell)
 }
}
setInterval(()=>{const n=new Date();data.forEach(s=>{const t=new Date(s.date+' '+s.time);if(t-n<300000&&t-n>0&&!s.alerted){alert('تذكير: '+s.title);s.alerted=true;save()}})},60000)
render()
</script>
</body></html>
